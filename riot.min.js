/* Riot 0.9.9, @license MIT, (c) 2014 Moot Inc + contributors */
(function(t){"use strict";var e={},n=function(){return Math.random().toString(36).substring(2,15)};t.model=function(r,o){if(typeof r=="string")return e[r]?new e[r](o):{};var i=typeof o=="function"?new o:typeof o=="string"&&t.model(o);return e[r.name||n()]=function(e){t.extend(this,i,r,e);if(!(this.on&&this.off&&this.trigger&&this.one))t.observable(this);this.name=r.name||this.name||arguments.callee.name||"base";this[this.name+"Init"]&&this[this.name+"Init"](this)}};t.observable=function(t){var e={},n=[].slice;t.on=function(n,r){if(typeof r==="function"){n.replace(/[^\s]+/g,function(t,n){(e[t]=e[t]||[]).push(r);r.typed=n>0})}return t};t.off=function(n){n.replace(/[^\s]+/g,function(t){e[t]=[]});if(n=="*")e={};return t};t.one=function(e,n){if(n)n.one=true;return t.on(e,n)};t.trigger=function(r){var o=n.call(arguments,1),i=e[r]||[];for(var u=0,f;f=i[u];++u){if(!f.busy){f.busy=true;f.apply(t,f.typed?[r].concat(o):o);if(f.one){i.splice(u,1);u--}f.busy=false}}return t};return t};var r={},o={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'"},i={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};function u(t){return t==undefined?"":(t+"").replace(/[&\"<>]/g,function(t){return i[t]})}t.render=function(t,e,n){if(typeof n!="function"&&n!==false)n=u;t=t||"";return(r[t]=r[t]||new Function("_","e","return '"+t.replace(/[\\\n\r']/g,function(t){return o[t]}).replace(/{\s*([\w\.]+)\s*}/g,"'+(function(){try{return e?e(_.$1):_.$1}catch(e){return ''}})()+'")+"'"))(e,n)};if(typeof top!="object")return;var f,a=t.observable({}),s=window.addEventListener,c=document;function p(t){t=t.type?location.hash:t;if(t!=f)a.trigger("pop",t);f=t}if(s){s("popstate",p,false);c.addEventListener("DOMContentLoaded",p,false)}else{c.attachEvent("onreadystatechange",function(){if(c.readyState==="complete")p("")})}t.route=function(t){if(typeof t==="function")return a.on("pop",t);if(history.pushState)history.pushState(0,0,t);p(t)}})(typeof top=="object"?window.$||(window.$={}):exports);